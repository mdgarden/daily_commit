# AWS-SAA 집중 준비기간 (1월 20일 ~ 2월 27일)

- 모의고사 응시 예정일 : 2월 첫째주
- 시험 응시 예정일 : 2월 28일

## 참고 사이트 정리
- [AWS Aurora 도입전에 알아야 할 몇가지 사실](https://link.medium.com/uH6SmWivLdb)
- [메시징 시스템의 이해](https://victorydntmd.tistory.com/343)

## 부족한 개념 범위
- RDS 성능에 영향을 미치는 요소
- Lambda함수와 보안
- 단어 / 개념 공부 목록
    - RAID 5종류
    - Amazon Simple Workflow Service
    - Amazon Directory Service
    - Amazon WorkSpaces
    - URI와 URL의 정확한 차이
    - AWS Secrets Manager
    - AWS step
    - Amazon VPC 게이트웨이형/인터페이스형 + ENI
- AWS Directory Service

## 봤는데 모르겠음
- CloudWatch/Trail과 ELB의 액세스 로그의 차이


## 완료 리스트 및 요약 정리
### 기초 개념
- SQS와 DB간의 유연한 결합이 의미하는 것 / 느슨한 결합과 강한 결합
    - 느슨한 결합은 컴포넨트 간의 의존성을 줄이고 강한 결합은 그 반대
    - 일반적으로 강한 결합은 좋지 않다. 유연성과 코드의 재사용성을 줄이고 변경을 더 어렵게 하고 시험 가능성을 지연시킴
- 인바운드 아웃바운드 (반대로 알고 있었음...)
- 프록시
- 워크로드
- CORS 크로스 오리진 리소스 쉐어링
- 네트워크 용량
- NAT 게이트웨이의 구성 / 기본 사항
    - NAT 게이트웨이를 만들려면 NAT 게이트웨이가 속할 퍼블릭 서브넷을 지정해야 함
    - NAT 게이트웨이를 만들 때 NAT 게이트웨와 연결할 EIP도 지정해야함
    - NAT 게이트웨이와 연결한 후에는 EIP를 변경할 수 없음
    - NAT 게이트웨이를 만든 뒤, 하나 이상의 프라이빗 서브넷과 연결된 라우팅 테이블을 업데이트하여 인터넷 바운드 트래픽이 NAT 게이트웨이를 가리키도록 해야함
    - NAT 게이트웨이를 삭제하면 EIP가 연결 해제 되지만 계정에서 주소가 해제되지는 않음
    - IPv6 트래픽을 지원하지 않음

- 피어링 접속
- FQDN
- CNAME
- 스루풋
- IOPS : Input/Output Operations Per Second
    - HDD,SDD,SAN 같은 컴퓨터 저장장치를 벤치마크 하는데 사용되는 성능 측정 단위
- VPC 엔드포인트와 NAT 엔드포인트의 다른점
- Load Balancer란
- SSH의 포트번호는 22, TCP의 포트번호는 43, MySQL의 포트는 1443
- 3 Tier Architecture
- Provisioning
- ACL, NACL
- 도커, 쿠버네티스
- 서버리스
- 쿠키, 세션

### AWS 서비스
#### 미분류
- Amazon API Gateway
- Amzon의 페일오버 테크놀로지

- Amazon SQS에 기반한 스케일링
    - SQS는 명령을 큐에 넣어서 분실을 예방하는 것이 가능함.
    - 또한, 보류 중의 큐에 기반해서 처리 노드를 스케일링 하는 것으로 수요에 대처 가능.
    - SQS의 메세지를 소비하는 쪽을 consumer라고 함. 즉 SQS에 담긴 큐(메세지)를 처리하는 EC2가 Consumer 인스턴스가 되는 것.
    - 풀링에서 빈 응답을 줄이기 = SQS의 수신 메시지 대기시간을 늘리기 
    - 유연한 결합이 필요하다 / 분리가 필요하다 / 메세지가 분실되어서는 안된다 → SQS

- SMB (Server Message Block)
    - 네트워크 상 존재하는 노드들 간에 자원을 공유할 수 있도록 설계된 프로토콜. 주로 네트워크에 연결된 컴퓨터끼리 파일, 프린터, 포트 또는 기타 메시지를 전달하는데 사용된다.

- Amazon Elastic Transcoder
    - 클라우드에서 미디어를 트랜스코딩하는 서비스

#### 데이터 마이그레이션
- AWS Snowball
    - 인터넷 연결이 열악한 곳에서 데이터를 전송하는데 도움이 됨
    - Snowball은 서비스 전체를 가리키며 Snowball Edge는 이 서비스가 사용하는 최신 디바이스 유형을 가리킴
    - DataSync를 못 쓸 때 Snowball을 사용

- AWS Snowball edge
    - Snowball서비스에서 제공하는 엣지 컴퓨팅 및 데이터 전송 디바이스
    - 엣지 컴퓨팅 : 데이터를 수집 및 처리하여 즉각적인 통찰력을 확보한 후에 데이터를 AWS로 전송하는 엣지 컴퓨팅 애플리케이션. 
    - 엣지 스토리지 : 엣지 로케이션에서 데이터르 집계 및 처리한 후에 AWS로 전송

- AWS Snowballmobile
    - 엑사바이트 규모의 데이터 이행이 필요할 때
    - 댑따 큰 트럭이 옮겨줌

- AWS Transit Gateway *글로벌 규모로 빠르게 확장할 때, 수요 급증에 원활하게 대응 가능*
    - 중앙 허브를 통해 VPC와 온프레미스 네트워크를 연결, 복잡한 피어링 관계를 제거하여 네트워크를 간소화함.
    - 글로벌 확장 시 리전 간 피어링을 사용하면 AWS 글로벌 네트워크에서 AWS Transit Gateway를 하나로 연결할 수 있음

- AWS DataSync/StorageGateway/Direct Connect Gateway 차이
    - DataSync
        - 온프레미스 스토리지 시스템과 AWS 스토리지 서비스 간, 그리고 여러 AWS 스토리지 서비스 간의 데이터 이동을 간소화, 자동화 및 가속화하는 온라인 데이터 전송 서비스
        -활성 데이터를 AWS로 마이그레이션하거나, 데이터를 아카이브하여 온프레미스 스토리지 용량을 확보하거나, 비즈니스 연속성을 위해 데이터를 AWS로 복제하거나, 분석 및 처리를 위해 데이터를 클라우드로 전송할 수 있음
    - Direct Connect를 통해 AWS DataSync를 사용할 수 있음, Storage Gateway와 함께 사용할 수 있음
    - Direct Connect는 온프레미스에 VPC를 접속하기 위한 서비스

- AWS Migration hub
    - 여러 AWS 및 파트너 솔루션에 걸쳐 애플리케이션 마이그레이션의 진행 상황을 추적할 수 있는 단일 위치를 제공
    - 마이그레이션하는 데 어떤 도구를 사용하든 관계없이 개별 애플리케이션의 진행 상황과 주요 지표를 제공
    - Migration Hub를 사용하는 데 따른 추가 비용은 없음

#### 업무자동화 / 유저 툴
- Amazon CloudFormation
- Amazon Elastic Beanstalk vs OpsWorks
    - OpsWorks는 구성 관리 플랫폼 / Elastic Beanstalk는 애플리케이션 관리 플랫폼
    - Beanstalk는 지가 알아서 다 해줌 / OpsWork는 운영에 대해 상당히 높은 수준의 사용자 정의 및 제어를 원하는 IT 관리자와 DevOps 엔지니어를 위한 통합 구성 관리 플랫폼
- CloudFormation vs Elatic Beanstalk vs Code Deploy
- Code deploy vs code pipline vs code build 차이
- AWS Trusted Advisor의 5가지 카테고리
    - 코스트의 최적화
    - 세큐리티
    - 내구성
    - 퍼포먼스
    - 서비스의 제한
    
    - AWS Trusted Advisor는 AWS 모범 사례에 따라 리소스를 프로비저닝하는 데 도움이 되도록 실시간 지침을 제공하는 온라인 도구. AWS 인프라를 최적화하고 보안과 성능을 향상시키고 전체 비용을 절감하며 서비스 한도를 모니터링할 수 있음.
    - CloudTraril이 Trusted Advisor를 감시함

- Microsoft RDP(Remote Desktop Protocol)를 사용하여 Windows 인스턴스에 원격 접속, 로그인

- AWS Device Farm
    - 테스트 인프라를 프로비저닝하고 관리하지 않아도 다양한 데스크톱 브라우저 및 실제 모바일 디바이스에서 테스트를 진행하여 웹 및 모바일 앱 품질을 향상시키는 애플리케이션 테스트 서비스


#### 루팅/네트워크 
- ENI
- Route 53의 정확한 역할
    - CNAME 레코드와 비슷한 역할
    - 리전 간 라우팅 (ELB는 리전 내에서 라우팅)
    - Zone Apex : Route53(Alias+CNAME)
    - 가중 라운드로빈 어쩌구 : Route53

- Egress-Only 인터넷 게이트웨이 (외부 전용 인터넷 게이트웨이) ⇔ NAT게이트웨이
    - VPC의 인스턴스에서 인터넷으로 IPv6를 통한 아웃바운드 통신을 가능케하되 인터넷에서 해당 인스턴스와의 IPv6 연결을 시작하지 못하게 할 수 있음.
    - IPv6 트래픽에만 사용됨

- ELB 관련
    - 인스턴스가 정상 상태 코드를 반환하는지 체크하는 건 ELB의 헬스체크의 역할
    - 만약 인스턴스에 이상이 발생했을 시, ELB 헬스체크의 역할은 ELB에서 해당 인스턴스를 분리하는 것
    - 항상 설정한 갯수만큼의 인스턴스가 돌아가게 하는 것은 Auto Scailing의 역할
    - Auto Scailing이 인스턴스를 재기동 혹은 생성시켜놓으면 ELB가 다시 와서 연결
    - 만약 Auto Scailing 그룹의 헬스체크 설정이 EC2로 되어있다면 ELB의 헬스체크 결과는 참고하지않음.

- ALB
    - ALB의 패스 베이스 루팅 기능(경로 기반 라우팅)
    - ALB의 Connection Draining = 등록 해제의 지연
        - 디폴트 값으로 설정되어있음.
        - 태스크가 완료 되기 전에 스케일인으로 인해 EC2가 분리되어버리는 문제 = Connection Draining은 이미 활성화가 되어 있는 상태이므로 등록해제 지연 타임아웃 시간을 늘려야함

- AWS Global Accelerator *서로 다른 리전 간 빠른 다운로드를 하고 싶을 때*
    - Amazon Web Service의 글로벌 네트워크 인프라를 통해 사용자 트래픽을 전송하여 인터넷 사용자 성능을 최대 60% 개선하는 네트워킹 서비스
    - Global Accelerator의 자동 라우팅 최적화 기능은 인터넷이 혼잡할 때 패킷 손실, 지터 및 지연 시간을 일관적으로 낮게 유지
    - 2개의 글로벌 정적 고객용 IP를 제공하여 트래픽 관리를 간소화
    - 다양한 리전 및 AZ 전용 IP어드레스를 관리하지 않아도 됨

- AWS App mesh    
    - 마이크로 서비스를 가시화하는 서비스
    - 어플리케이션 레벨의 네트워킹을 제공하여 다양한 종류의 컴퓨팅 인프라 스트럭쳐 또는 고객의 서비스의 상호통신을 용이하게하는 서비스 메쉬

#### 컴퓨팅
- EC2
    - T2 인스턴스에서 사용할 수 있는 스토리지는 EBS뿐
    - T2 인스턴스의 Linux Amazon 머신이미지는 하드웨어 가상머신(HVM)만 사용할 수 있음
    - 스팟 인스턴스 종료 할 때 : 스팟 리퀘스트가 영속적인 리퀘스트였다면 리퀘스트를 취소하고 종료, 나머지는 그냥 종료
    - 완전한 스냅샷을 작성하기 위해서는 EC2 인스턴스를 정지시켜야함
    - EBS 스냅샷을 이용해 정기적으로 백업하고 개인 AMI를 만들어 추후 인스턴스 시작을 위한 템플릿으로 구성 저장한다.
    - EC2의 스텝 스케일링 / 타겟 트래킹 스케일링
        - CPU의 평균 사용량을 유지하려면 스텝 타겟 트래킹 스케일링을 사용할 것을 강력히 권고


- 배치그룹 (플레이스멘트 그룹 - EC2 영역)
    - 스플릿 플레이스멘트 그룹 (분산형 배치 그룹) *상호 관련 오류를 줄임*
        - 인스턴스를 다른 하드웨어에 배치하여 가용성을 높이는 서비스

    - 클러스터 플레이스멘트 그룹 : *낮은 레이턴시의 네트워킹 성능*
        - 저레이턴시의 네트워크 퍼포먼스를 제공
        - 스케일링은 제공하지 않음
        - 단일 AZ 내의 인스턴스를 논리적 그룹화한 것
        - 배치 그룹의 모든 인스턴스에 동일한 인스턴스 유형을 사용
        - 나중에 배치 그룹에 인스턴스를 더 추가하거나 배치 그룹에서 두 가지 이상의 인스턴스 유형을 시작하려고 하면 용량 부족 오류가 발생할 가능성이 커짐
        - 배치그룹의 인스턴스를 중지한 후 다시 시작하면 인스턴스가 계속 배치그룹에서 실행되지만, 용량이 부족한 경우 시작에 실패함
    
    - 파티션 플레이스멘트그룹 : *하드웨어를 공유하지 않음, 대규모의 분산 및 복제된 워크로드에 필요*
        - 애플리케이션에 대한 상관 관계가 있는 하드웨어 장애 가능성을 줄이는 데 도움이 됨
        - 배치 그룹 내 두 파티션이 동일한 랙을 공유하지 않으므로 애플리케이션 내 하드웨어 장애의 영향을 격리 시킬 수 있음
        - 동일한 리전의 여러 AZ에서 파티션을 가질 수 있음
        - 파티션 배치 그룹은 가용 영역당 파티션을 최대 7개까지 가질 수 있음

#### 서버리스
- Amazon ECS/Fargate/EKS/ECR
    - ECS : 컨테이너를 태스크, EC2를 Cluster라고 부름 / Cluster용 EC2 인스턴스가 필요
        - 컨테이너 포트를 호스트의 비어있는 동적 포트로 바인딩해서, ECS는 ALB의 탁겟 그룹에 호스트와 그 동적 호스트 번호를 세트로 등록함 
    - Fargate : EC2없이 콘테이너 동작가능 / 액티브 상태가 아닐 때 과금되지 않음
    - Amazon Aurora Serverless : 자동으로 스케일링 해줌
    - EKS : EC2 관리 안해도 됨
    - ECR : 컨테이너 + "레지스트리" 어쩌구 나오면 이거

- 서버리스, Lambda 함수, 트리거
    - Lambda 함수의 특징
        - 비동기 호출에서 무제한의 호출이 가능
        - 최대 실행시간은 15분(900초)

    - Lambda 함수가 이벤트를 읽는 서비스
        - Dynamo DB
        - Amazon Kinesis
        - Amazon MQ
        - Amazon Managed Streaming for Apache Kafka
        - Amazon Simple Queue Service
    - Lambda 함수를 동기적으로 호출하는 서비스 
        - ELB(ALB)
        - Amazon Cognito
        - Amazon Lex
        - Amazon Alexa
        - Amazon API Gateway
        - Amazon CloudFront(Lambda@Edge)
        - Amazon Kinesis Data Firehose
        - Amazon Simple Storage Service 배치
    - Lambda 함수를 비동기적으로 호출하는 서비스
        - S3
        - SNS
        - SES
        - CloudFormation
        - CloudWatch Logs/Events
        - CodeCommit
        - Config
        - loT/loT Events
        - CodePipeline

- Lambda를 Amazon API Gateway에 사용하기
    - Amazon API Gateway를 사용해서 Lambda 함수의 HTTP 엔드포인트를 가지는 웹 API를 작성할 수 있음. 
    - 인증 및 승인의 콘트롤에 의해 API로의 액세스를 보호할 수 있음.
    - API는 인터넷 경유에서 트래픽을 처리하는 것도 VPC 내부에서만 액세스 가능하게 하는 것도 가능함.

- Amazon Athena
    - 표준 SQL을 사용해 Amazon S3에 저장된 데이터를 간편하게 분석할 수 있는 대화식 쿼리 서비스
    - 서버리스 서비스이므로 관리할 인프라가 없으며 실행한 쿼리에 대해서만 비용을 지불하면 됨

- AWS Glue
    - 분석, 기계 학습 및 애플리케이션 개발을 위해 데이터를 쉽게 탐색, 준비, 그리고 조합할 수 있도록 지원하는 서버리스 데이터 통합 서비스
    - 데이터 통합에 필요한 모든 기능을 제공하므로, 몇 개월이 아니라 몇 분 안에 데이터 분석을 시작하고 해당 내용을 활용할 수 있음

#### 스토리지 관련
- Amazon EBS, EFS, S3의 차이점과 블록 스토리지, 객체 스토리지, 파일 스토리지의 차이점
- S3 관련
    - S3 Transfer Acceleration
        - 다른 지리적 지역에서 S3로의 고속 데이터 전송을 가능하게 함
        - 가성비 높음

    - S3 버켓 폴리시와 IAM폴리시의 차이, 우선도
        - S3 버켓에 제한을 거는 3가지 방법 
            1. 버켓단위로 제한하는 버켓 폴리시
            2. IAM 유저단위로 제한하는 유저 폴리시
            3. IAM 유저 단위로 제한하는 ACL
        - S3의 리소스는 기본으로 프라이빗 설정이 되어있음(암호화되었다는 말이 아님). 오브젝트의 소유자만이 오브젝트에 액세스 가능.
        - 버켓 ACL보다 버켓 폴리시가 우선시 됨
        - 버킷 폴리시는 ACL 기반 액세스 정책을 보완하며 대부분의 경우 액세스 정책을 대신함
        - IAM 롤을 사용해서 버켓을 퍼블릭으로 설정할 수 없음. IAM 폴리시는 버켓에 어태치할 수 없음.
        - 버켓에 대한 액세스 허가와 오브젝트에 대한 액세스 허가는 완전히 독립되어있으며 액세스 허가는 버켓에서 오브젝트로 계승되지않음.
        - 세큐리티 그룹은 S3로의 액세스를 제어하지 않음.
    - S3 객체의 리커버리가 가능한 것은 버져닝 뿐 / MFA 삭제는 세큐리티의 레이어를 추가할 뿐이지 리커버리를 지원하지않음 

    - S3에 객체를 업로드 하는 3가지 방법
        1. 단일 객체 업로드
        2. 미리 서명된 URL로 S3에 객체를 업로드 
        3. 멀티파트 업로드 API를 사용한 객체 업로드 / 복사
            - 각 파트는 객체 데이터의 연속적인 부분. 객체 파트는 독립적으로 그리고 임의의 순서로 업로드할 수 있음. 파트의 전송이 실패할 경우 다른 파트에 영향을 주지 않고도 해당 파트를 재전송할 수 있음. 객체의 모든 파트가 업로드되면 Amazon S3가 이들 파트를 수집하여 객체를 생성함. 일반적으로 객체 크기가 100MB에 근접할 경우, 단일 작업에서 객체를 업로드하는 대신 멀티파트 업로드 사용을 고려.
            - 복사하려는 객체가 5GB 이상일 경우 멀티 파트 업로드로 복사 가능, 그 이하는 단일 작업으로 객체 복사

    - S3 암호화 보존법
        - S3 기본 암호화를 사용하면 S3 버킷의 기본 암호화 동작을 설정할 수 있음.
            - 버킷에 저장되는 모든 새 객체를 암호화하도록 버킷에 대한 기본 암호화를 설정할 수 있음.
            - 객체는 AWS KMS에 저장된 S3관리형 키 (SSE-S3) 또는 고객 마스터 키(CMK)와 함께 서버측 암호화를 사용하여 암호화 됨.
            - 서버 측 암호화를 사용하는 경우 S3에서는 객체를 디스크에 저장하기 전에 암호화하고 객체를 다운로드할 때 이를 해독함.
        - Amazon S3는 고객 제공 키를 사용한 서버측 암호화(SSE-C)를 통해 PUT 요청에 제공된 암호화 키를 사용하여 서버 측 객체를 암호화할 수 있음. S3가 객체를 해독하려면 GET 요청에 동일한 키를 제공해야함. 고객은 또한 클라이언트 측 데이터를 S3에 업로드하기 전에 암호화하고 다운로드 후 해독할 수 있음.
        - *S3 이벤트에 의해 트리거로 람다 함수를 사용하여 암호하* ← 안됨

    - S3 컨텐츠로의 액세스 제한
        - 오리진 액세스 ID(OAI)라는 특수 CloudFront 사용자를 만들어 배포와 연결
        - CloudFront에서 OAI를 사용ㅎ여 버킷의 파일을 액세스하여 사용자에게 제공할 수 있도록 S3 버킷 권한을 구성. 사용자가 S3 버킷에 대해 직접 URL을 사용하여 파일에 액세스할 수 없도록 해야함.

    - 아카이브 클래스
        - S3 Standard
            - 모든 데이터 유형에 적합한 범용 스토리지로, 대개 자주 액세스하는 데이터에 사용됨
        - S3 Intelligent - Tiering 
            - 액세스 패턴을 알 수 없거나 액세스 패턴이 변경되는 데이터에 대해 자동 비용 절감 효과 제공
        - S3 Standard - Infrequent Access 
            - 라이브 상태가 된 지 오래되었지만 밀리초 단위 액세스 성능이 요구되는 자주 액세스하지 않는 데이터용
        - S3 One Zone - Infrequent Access
            - 밀리초 단위 액세스 성능이 요구되는 다시 생성 가능한 자주 액세스하지 않는 데이터용
        - S3 Glacier(S3 Glacier) 
            - 검색 옵션이 1분부터 12시간까지인 장기적인 백업 및 아카이브 용
            - 검색시간 최대 n시간 
            - 최소 보관 기간 : 90일 *최소 보관 기간 이전에 액세스하려면 비용이 청구됨
        - S3 Glacier Deep Archive
            - 1년에 한두번 액세스하고 12시간 이내에 복원할 수 있는 장기적인 데이터 아카이빙용
            - 7-10년 동안 유지되는 데이터의 장기 보관을 위해 설계된 최저 비용 스토리지 클래스
            - 최소 보관 기간 : 180일
        
            S3 Glacier에 보관되는 정지 데이터는 자동적으로 AWS가 관리하는 키를 이용하여 서버측에서 암호화를 함. 독자적인 키를 관리할 경우엔는 Glacier에 데이터를 격납하기 전에 클라이언트 측의 암호화를 사용하는 것도 가능. 

- Amazon EBS의 종류 4가지
    - 범용 SSD = 지연 시간이 짧은 대화형 앱 / 개발 및 테스트 환경 / 가격과 성능 간의 균형을 제공
        - 볼륨당 최대 처리량 = gp3:1,000MiB/s gp2:250MiB/s
    - 프로비저닝된 IOPS SSD / 지연 시간이 짧거나 처리량이 많은 미션 크리티컬 워크로드에 적합한 고성능을 제공
        - io2 Block Express : 밀리초 만의 처리 시간, 지속적인IOPS 성능 또는 1,000MiB/s 이상의 처리량이 필요한 워크로드
        - io2, io1 : I/O 집약적 데이터베이스 워크로드
    - 처리량에 최적화 된 HDD = 자주 액세스하는 처리량 집약적 워크로드에 적합한 저비용 HDD
        - st1 : 빅데이터, 데이터 웨어하우스, 로그 처리 등
    - Cold HDD = 자주 액세스하지 않는 워크로드에 적합한 가장 저렴한 HDD
        - sc1 : 자주 액세스하지 않는 데이터를 위한 처리량 중심의 스토리지 / 스토리지 비용이 최대한 낮아야 하는 시나리오

- EBS 관련
    - EBS 볼륨은 서로 다른 AZ에서 미러링할 수 없음

- RDS 관련
    - Amazon RDS 리드레플리카는 프라이머리 데이터베이스의 부하를 경감시켜 퍼포먼스를 향상시킴.
    - RDS의 Auto Scailing은 "용량"을 실시간으로 스케일링 해주는 것 / 퍼포먼스 향상에는 상관X
    - RDS의 리드 레플리카
        - 비용을 최소화 하고 싶다 : 같은 AZ내에서 리드 레플리카 작성
        - 고가용성을 보장하고 싶다 : 멀티 AZ유효화(다른 AZ의 리드 레플리카는 데이터 전송 코스트가 발생함)


                    - 데이터베이스는 SQL을 사용해서 조작할 수 있는 테이블 형태의 데이터의 모음이다. 극단적으로 말해서 엑셀과 비슷한 것. 사진이나 동영상등을 저장하기 어렵다. S3는 단순히 쌓아두기만 하기 때문에 저렴한 것, 반면 RDS의 경우는 응답이 빨라야하므로 (저레이턴시) 용량제한이나 객체의 개당 용량제한이 있는 것
                    - 세큐리티그룹(보안그룹) : 일단 차단하고 나중에 허용 / 인스턴스 단위(EC2 등)
                    - 네트워크 ACL : 일단 허용하고 나중에 차단 / 서브넷 단위 / 1서브넷 1ACL
                    - 세큐리티그룹과 ACL이 충돌하면 세큐리티 그룹이 우선함
                    - 리드 레플리카 = DB의 비동기 백업
                    - 멀티 AZ배치 = 동기 백업
                    - 비동기 레플리케이션 = 그런거없음
                    - 수동백업 = 비추
                    - S3는 데이터 베이스인가? 다른 데이터 베이스와 무엇이 다른가? File Storage와 Database의 차이점은?
                            - S3를 데이터베이스로 사용할 수도 있다. DynamoDB나 다른 DB, 저장소마다 특장점이 있기 때문에 필요한 요건에 맞춰 선택해야한다 

- EFS 관련
    - EFS 리소스의 액세스 제어
        - 리소스의 작성 또는 액세스는 액세스허가 폴리시에 의해 관리됨
        - 어카운트 관리자는 IAM ID(유저, 그룹, 롤)에 액세스권한 폴리시를 어태치 할 수 있음.
        - 리소스에 폴리시를 어태치하는 것도 가능.
    - EBS보다 비싸지만 저장 사용량만큼 비용이 발생

- Dynamo DB
    - 키/밸류 형의 DB가 필요하다 / NoSQL DB가 필요하다 : Dynamo DB
    - 마이크로 단위의 레이턴시 / DB에 영향을 주고 싶지 않다 : Dynamo DB Accelerator(DXA)
    - * Auto Scailing은 DB의 부하를 경감시키지 않음
    - 메타 데이터를 보존하기에 적합

- Amazon FSx for Lustre
    - HPC 어쩌구 or 아무튼 고성능이 필요하다~ 나오면 무조건 이거

- AWS Storage Gateway 

        S3는 일반적인 파일 시스템 방식이 아닌 object 기반이고, REST/HTTP 기반의 통신이기 때문에 속도나 사용성 면에서는 익숙하지 않은 불편함이 따른다. 
        이런 단점을 개선하기 위한 새로운 서비스로 오픈한 것이 바로 Storage Gateway 이다. (중략)
        예를 들면, 기존 사내 인프라 환경에서 사용하던 백업 솔루션을 그대로 사용하면서, (대부분 백업 솔루션은 iSCSI 방식을 지원한다) 데이터 저장 위치만 S3 기반으로 손쉽게 전환이 가능할 수 있겠다.
        * 출처 [AWS Storage Gateway](https://bluese05.tistory.com/24)

    - 백업 및 아카이브를 클라우드로 이동
    - 클라우드 기반 파일 공유를 통한 온프레미스 스토리지 감소
    - 온플미스 애플리케이션에 AWS에 저장된 데이터에 대한 짧은 지연 시간의 액세스 제공

- Amazon Aurora : 멀티 AZ 지원 불가 (구조 자체가 이미 멀티 AZ)

#### 빅데이터 처리

- RedShift 관련
    - RedShift의 크로스 리젼 스냅샷
    - Redshift 및 데이터베이스의 구체적인 부분

- Amazon Kinesis Data Streams vs Firehose vs analytics 차이
    - Streams가 좀 더 빠름
    - Streams는 수동 매니지, Firerhose는 풀매니지드 서비스
    - Firehose가 좀 더 설정할게 적음
    - Firehose는 오직 S3와 Redshift, Elasticsearch Service, Splunk로만 데이터를 보낼 수 있음.
    - Streams나 Firehose로 받은 데이터를 SQL를 써서 처리해주는게 Analytics. 강력한 실시간 처리 지원

- Kinesis Data Streams vs SQS
    - Streams는 리터럴리 실시간 빅데이터를 위한 것 / SQS는 메세징 서비스
    - Streams는 매뉴얼 / SQS는 풀매니지드
    - Streams는 기간이 만료되면 삭제됨 / SQS는 컨슈머가 삭제함
    - Streams와 SQS의 스탠다는 최소 한번을 보장 / SQS의 FIFO는 중복되지않는 것을 보장
    - 둘 다 될 것 같은데 "실시간" 키워드가 들어가지 않으면 SQS

- EMR (Elastic MapReduce)
    - Apache Spark, Apache Hive, Apache HBase, Apache Flink, Apache Hudi 및 Presto와 같은 오픈 소스 도구를 사용하여 방대한 양의 데이터를 처리하기 위한 업계 최고의 클라우드 빅 데이터 플랫폼
    - 프로비저닝 용량 및 클러스터 조정 등의 시간이 소요되는 작업을 자동화하여 빅데이터 환경을 쉽게 설치, 운영, 확장하게 해줌
    - EMR을 사용하여 S3에 격납되어있는 대량의 데이터를 분석해야할 때, 잡의 실행시간을 단축시키는 가장 가성비 좋은 방법은 집약된 I/O퍼포먼스보다 작은 인스턴스를 사용하는 것

            Redshift : 분산 애플리케이션의 처리기반, PostgreSQL기반, 표준  SQL을 이용한 데이터 처리 지원. 이미 정제하고 적재된 데이터를 이용하여 데이터를 분석
            EMR: BI툴과 함께 사용하는 경우가 많음. 하둡 프레임워크, HDFS 등을 이용. 원천 데이터를 정제하고 분석
            Amazon Athena: 서버를 설정하거나 관리할 필요 없이 S3의 데이터에 대한 임의 쿼리를 가장 쉽게 실행할 수 있는 방법을 제공



#### 디렉토리 기반
- AWS Managed Microsoft AD
    - 하나의 디렉토리를 여러 사용 사례에 공유 가능. 
    - 디렉토리를 공유하여 .NET애플리케이션, Windows 인증 RDS가 활성화된 SQL Server용 등
    - 사용자에게 외부 클라우드 애플리케이션에 액세스할 수 있게 허용하고 온프레미스 AD 사용자가 AWS 클라우드의 리소스를 관리하고, 액세스 할 수 있도록 허용하는 기능이 포함됨.
    - AD 디렉토리에서 AWS 애플리케이션 또는 서비스를 활성화하면 사용자는 AD 자격 증명을 사용하여 애플리케이션 또는 서비스에 액세스 할 수 있음.

- Active Directory Connector (AD Connector)
    - AD Connector는 클라우드에서 정보를 캐시 저장하지 않고도 온프레미스 Microsoft Active Diretory로 디렉토리 요청을 리다이렉션하수 있는 디렉토리 게이트 웨이
    - AWS Management 콘솔에 대한 IAM 역할 기반 액세스를 통해 Amazon EC2 인스턴스나 Amazon S3 버킷 같은 AWS 리소스를 관리할 수 있음

- SMB 파일 공유 생성
    - SMB 파일 공유를 생성하기 앞서 이에 대한 SMB 보안 설정을 구성해야 함. 또한 인증을 위해 AD또는 게스트 액세스를 구성해야 함.
    - 하나의 파일 공유는 오직 한 가자 유형의 SMB 액세스만 제공할 수 있음.

#### 세큐리티/인증/보안 영역 정리
- IAM
    - IAM 유저 : 나는 사람이다
    - IAM 롤 : 나는 프로그램(서비스)이다
    - IAM 그룹 : 우리가 유저다
    - IAM 폴리시 : 내가 법이다
    - IAM의 엑세스 키 사용 ← 높은 확률로 오답
    - IAM의 권한 한계 : EC2 오퍼레이팅 시스템으로의 액세스권을 가진 유저를 제어하기 위해서는 SSH키, 윈도우 패스워드, 세큐리티 그룹을 사용함.
        - IAM 시스템에는 특정 인스턴스의 오퍼레이팅 시스템으로의 액세스를 허가 또는 거부할 방법이 없음. 서비스 액세스는 제어 가능.

- AWS의 인증정보를 안전하게 설정하고 사용하는 법 관련 키워드
    - 인스턴스에 롤을 부여
    - MFA는 인증정보를 안전하게 보관하는 것과는 상관없음
    - S3에서 관리하는 키 = 그런거 없음. 아무튼 안됨.
    - EC2 인스턴스에 IMA롤을 어태치하는 것으로 인증 정보를 안전하게 넘길 수 있음.

- 네이티브 암호화 : Amazon S3, Storage Gateway, Dyanamo DB

- Lambda함수가 프라이빗 서브넷 내의 RDS 데이터 베이스에 액세스 하는 방법 
    - RDS가 있는 VPC에 Lambda함수를 작성함
    - RDS의 세큐리티 그룹에서, Lambda의 세큐리티 그룹으로부터의 인바운드 액세스를 허가함

- KMS/서버사이드 암호화/클라이언트 암호화

    |암호화|담당|암호화 키 관리|
    |------|---|---|
    |SSE-S3|서버 측|S3|
    |SSE-KMS|서버 측|KMS|
    |SSE-C|서버 측|클라이언트|
    |CSE-KMS|클라이언트 측|KMS|
    |CSE-C|클라이언트 측|클라이언트|

- KMS vs HSM
    - 초당 100을 넘는 리퀘스트가 있다
    - 공개키 암호화를 쓰고 싶다
    - 이 중 하나라도 해당된다면 HSM, 나머지 KMS
    - HSM는 키 수명 주기 관리기능(액세스 제어 정책, 키 로테이션)을 수행하지는 않음

- AWS Certifcate manager
    - AWS 서비스 및 연결된 내부 리소스에 사용할 공인 및 사설 SSL/TLS(Secure Sockets Layer/전송 계층 보안) 인증서를 손쉽게 프로비저닝, 관리 및 배포할 수 있도록 지원하는 서비스
    - 아무튼 인증서 관련

- Amazon Cognito
    - 모든 인증/허가의 서비스만 외부유저의 이용에게 적합한 것은 Cognito뿐
    - 모바일과 웹 앱에서 인증 및 보안관리, 별도 사용자 계정 서비스를 활용하여 다양한 AWS 서비스를 손쉽게 연동하고 권한 및 접근 관리를 할 수 있음.
    - Amazon Cognito 유저 풀
        - 완전 관리형 사용자 디렉토리
        - 몇 분 안에 모바일 앱 혹은 웹앱에 회원 가입 데이터 베이스를 만들 수 있음.
    - 사용자 풀 : 사용자의 가입과 로그인을 제공하는 사용자 저장소
    - 자격 증명 풀 : 사용자 풀에 저장된 정보를 바탕으로 로그인 또는 회원가입에 성공한 사용자에게 AWS 인프라의 여러 서비스에 대한 권한을 부여
        
- 모니터링 정리
    - EC2 인스턴스의 상세모니터링 = 데이터를 더 많은 항목으로 알고 싶다 X 데이터를 더 자주 취득하고 싶다 O
        - 기본 모니터링 : 5분에 한번씩 데이터 취득
        - 상세 모니터링 : 1분에 한번씩 데이터 취득

- CloudWatch의 기본 메트릭스 vs 커스텀 메트릭스
    - 만약 메트릭스에서 이상을 검지했다고 하더라도, CloudWatch만으로는 문제가 발생한 어플리케이션만 재기동할 수 없음.(인스턴스 전체 재기동은 가능)
    - 따라서 AWS Systems Manager나 AWS Lambda와 같은 서비스와의 연계가 필수
    - S3는 메트릭스가 없음! 액세스 로그를 유효설정하는 것으로 취득 가능.
    - CloudWatch의 데이터는 2주간 보존.
        |서비스|커스텀 항목|기본 항목|
        |------|---|---|
        |EC2|디스크/메모리/swap사용률, ping/프로세스/포트/web감시|CPU사용률, CPU크레짓 소비수, 디스크r/w의 I/O수, 네트워크 인아웃사용 바이트 수, 시스템 체크, 로그 감시|

    - 클라이언트의 접속정보를 알고 싶다면 ELB의 액세스 로그 활성화

- Amazon CloudFront + AWS WAF 
    - SQL 인젝션 또는 크로스사이트 스크립팅 같은 일반적인 공격패턴을 차단하는 보안 규칙 및 사용자가 정의한 특정 트래픽 패턴을 필터링하는 규칙을 생성하도록 지원
    - 애플리케이션에 트래픽이 도달하는 방법을 제어할 수 있음

- DDos 공격의 방어는 AWS Shield를 이용.(디폴트로 유효함)
- 일시적 인증 : STS 

#### 자주 틀리는 문제
- 3계층 웹 애플리케이션에서 웹 층만 HTTPS로 인터넷에 액세스 하는 방법
    - 인터넷 게이트웨이를 VPC에 접속함. 웹 층의 퍼블릭 서브넷을 작성함. 애플리케이션 층과 데이터베이스 층의 프라이빗 서브넷을 작성함.
    - 인터넷으로부터의 HTTPS 리퀘스트를 허가하는 세큐리티 그룹을 작성함. 웹 세큐리티 그룹으로부터의 HTTP 리퀘스트만을 허가하는 애플리케이션 세큐리티 그룹을 작성함. 데이터 베이스 포트에서만 애플리케이션 세큐리티그룹으로부터의 TCP접속을 허가하는 데이터 베이스 세큐리티 그룹을 작성함.

- 여러 가용 영역에 걸친 VPC에서, 프라이빗 서브넷에서 실행되는 애플리케이션 계층의 Amazon EC2 인스턴스가 인터넷에서 소프트웨어 패치를 다운로드 해야함. 단, 인스턴스는 인터넷에서 직접 액세스할 수 없을 때 취해야하는 조치는?
    - 퍼블릭 서브넷에서 NAT 게이트웨이를 구성함
    - 인터넷 트래픽을 위해 NAT 게이트웨이로 라우팅되는 사용자 지정 라우팅 테이블을 정의하고 이를 애플리케이션 계층의 프라이빗 서브넷과 연결함